
Joel recommends 5 things for tracking bugs:

1.  Complete steps to reproduce the bug
  a.
2.  Expected behavior
3.  Observed (buggy) behavior
4.  Who it's assigned to
5.  Whether it's been fixed or not
6.

______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________

  Complete steps to reproduce the bug                                                                       |         Expected Behavior         |      Observed (buggy) behavior         |   Who it's assigned to       | Fixed yet? |        things I've tried
______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
                                                                                                            |                                   |                                        |                              |            | 
  #!/bin/bash                                                                                               |                                   |                                        |                              |            | 
  env_name=cat3                                                                                             |                                   |                                        |                              |            | 
  conda create -y --name $env_name python=3.6.6 &&\                                                         | >>>import matplotlib.pyplot       |  Segmentation fault                    |     Nathan Bendich           |  Yes       |  Solution : Always do mpl.use('TkAgg') 
  (or mpl.use('Agg')) before import matplotlib.pyplot as plt                                                |                                   |                                        |                              |            |
    python3.6.6 && source activate $env_name                                                                | >>>                               |  >>> import cv2                        |                              |            | 
  pip install --upgrade pip                                                                                 | # doesn't crash                   |  >>> import numpy                      |                              |            | 
    # version 19.0.1 supported tensorflow-1.12.                                                             |                                   |  >>> import matplotlib.pyplot as plt   |                              |            | 
    #   version 19.0.1 does this properly as of                                                             |                                   |  Segmentation fault (core dumped)      |                              |            | 
    #     Sun Jan 27 19:49:32 EST 2019.                                                                     |                                   |                                        |                              |            | 
  conda install -yc conda-forge scikit-image==0.14.1 &&\                                                    |                                   |                                        |                              |            | 
  pip install --ignore-installed --upgrade\                                                                 |                                   |                                        |                              |            | 
  https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.12.0-cp36-cp36m-linux_x86_64.whl &&\     |                                   |                                        |                              |            | 
  conda install -y matplotlib==2.2.3                                                                        |                                   |                                        |                              |            | 
                                                                                                            |                                   |                                        |                              |            |
  conda install -c conda-forge opencv                                                                       |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
  Perhaps the issue is the version of matplotlib?                                                           |                                   |                                        |                              |            |
    pkgs/main::matplotlib-2.2.3-py36hb69d~                                                                  |                                   |                                        |                              |            |
______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
                                                                                                            |                                   |                                        |                              |            |
  hmr &&\                                                                                                   |                                   |                                        |                              |            |
  p2 render_smpl.py 10 -10 0 0 0 0 0 0 0 0                                                                  | saves smpl mesh with betas        |  seems to save mesh with betas         |     Nathan Bendich           |  Yes.      |  as of Thu Mar 21 10:33:48 EDT 2019
    The problem was in smpl.write_smpl()                                                                    |  10 -10 0 0 0 0 0 0 0 0           |    0 0 0 0 0 0 0 0 0 0                 |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
  Always do mpl.use('TkAgg') before import matplotlib.pyplot as plt                                         |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
                                                                                                            |                                   |                                        |                              |            |         
  Trying to get all the packages for render_smpl.py AND my own "cat" code in one python env:                |                                   |                                        |                              |            |         
______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
                                                                                                            |                                   |                                        |                              |            |
  conda install all.                                                                                        |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
                                                                                                            |                                   |                                        |                              |            |
______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
                                                                                                            |                                   |                                        |                              |            |                                        
  opendr doesn't work with python3.                                                                         |                                   |                                        |                              |            |                                        
  it often breaks even with python2, in fact.                                                               |                                   |                                        |                              |            |                                        
  hard to install                                                                                           |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
  COPY THE RIGHT NAME OF requirements.txt in here.                                                          |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
                                                                                                                                                                                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                                                                                                                        
1.  Complete steps to reproduce the bug:

A.  Follow "conda create env" instructions to get a working conda environment called "cat12"
B.  `conda activate cat12 && python3 seg.py` ,   calling img_diff on 2 images, one with a person in T-pose in the foreground and another with just the background (simply, take the 1st pic with you in it, posed like Jesus during the crucifixion.  Take the 2nd pic with 100% the same phone angle, but with you NOT in the picture.):
  a.  Probably we'll just end up telling the customers to take a video "MTailor style" (where you put the smartphone on the ground, angled up so your entire body is in view, do a T-pose, then walk away)



2.  Expected behavior:
  a.  Returns the "silhouette" where the person was (like a deep-learned segmentation mask of the person, but the tech I use is simpler, eassier to debug, and more reliable (EXCEPT FOR the BUG CASES I enumerate below))


3.  Observed (buggy) behavior:

  def img_diff(img1, img2):
      As of Sun May  5 19:18:40 EDT 2019, bugs with np.greater(   np.linalg.norm(  img1-img2)):
        It breaks:

        1.  If the person's SHADOW is visible in the "T-pose picture" and the floor/ground color in the "background" photo is light 
          a.  (if the floor is black or dark, we don't have problems because we don't recognize the shadow as part of the silhouette)
        2.  If there are REFLECTIONS in the "T-pose picture"
          a.  (ie. shiny floors, mirrors, etc.)
          b.  img_diff() will pick these up as part of the silhouette, when actually they are artifacts of the environment rather than of the person
        3.  If skin/clothing color is too similar to the color of the background,
        4.
        5.

4.  Who this bug is assigned to:  Nathan X Bendich

5.  Whether it's been fixed:
  Not yet (as of Sun May  5 19:18:40 EDT 2019)
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
                                                                                                            |                                   |                                        |                              |            |                                        
______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
                                                                                                                                                                                                        
Bug C.




 

1.    Do `git checkout 8759307` and `./setup.sh` and `python3 utils.py`, and you'll replicate the bug.  setup.sh may need some finessing before it works.
  a.
2.    Expected behavior:
  a.  Should show segmented images from a video.
3.  Buggy behavior
  a.  "ImportError: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.22' not found (required by /home/n/anaconda3/envs/cat12/lib/python3.6/site-packages/../../libopencv_objdetect.so.3.4)"
4.  Who it's assigned to:
  a.  Nathan Bendich
5.  Fixed yet?
  a.  No.
6.  NOTES: I suspect this has something to do with matplotlib.use('Agg') or matplotlib.use('TkAgg'), but I don't really know; that's just a theory
7.  Solution:  always put "import cv2" at the TOP of a file.
8.
9.
10.
11.
12.
13.
14.
15.
16.
17.
18.










somewhere in seg:
  /home/n/anaconda3/envs/cat12/lib/python3.6/site-packages/skimage/transform/_warps.py:105: UserWarning: The default mode, 'constant', will be changed to 'reflect' in skimage 0.15.
    warn("The default mode, 'constant', will be changed to 'reflect' in "
    mask_fname is:
     /home/n/x/p/fresh____as_of_Dec_12_2018/vr_mall____fresh___Dec_12_2018/masks2019_03_03____08:57_AM___/000000000.jpg
     Lossy conversion from int64 to uint8. Range [0, 15]. Convert image to uint8 prior to saving to suppress this warning.


  change .astype('float64') to [no astype()]
























































For software tips: 


  The Joel Test

  1.Do you use source control?
    Yes
  2.Can you make a build in one step?
    No?
  3.Do you make daily builds?
    No.
  4.Do you have a bug database?
    Not a good one
  5.Do you fix bugs before writing new code?
    No.
  6.Do you have an up-to-date schedule?
    No.
  7.Do you have a spec?
    No.
  8.Do programmers have quiet working conditions?
    Yes!
  9.Do you use the best tools money can buy?
    We don't have hella money.  But no.
 10.Do you have testers?
    Just me.
 11.Do new candidates write code during their interview?
    What?
 12.Do you do hallway usability testing?
    Idk what this is.


======================================================================
Thu Feb 28 11:27:09 EST 2019

   p3 measure.py 
running deeplab on image
resized_image.shape:   
(513, 162, 3)




resized_image going into deeplab




Traceback (most recent call last):
  File "measure.py", line 639, in <module>
    test_chest_circ()
  File "measure.py", line 619, in test_chest_circ
    chest_circ=chest_circum(json_fname,front_fname,side_fname, NATHAN_H)
  File "measure.py", line 305, in chest_circum
    pix_height    = pix_h(front_mask)
  File "measure.py", line 554, in pix_h
    return pixel_height(mask)
  File "measure.py", line 551, in pixel_height
    return np.amax(locs[0])-np.amin(locs[0])
  File "/home/n/anaconda3/envs/cat/lib/python3.6/site-packages/numpy/core/fromnumeric.py", line 2334, in amax
    initial=initial)
  File "/home/n/anaconda3/envs/cat/lib/python3.6/site-packages/numpy/core/fromnumeric.py", line 83, in _wrapreduction
    return ufunc.reduce(obj, axis, dtype, out, **passkwargs)
ValueError: zero-size array to reduction operation maximum which has no identity









  These aren't precisely "bugs," but records of why measure.py doesn't work yet:

  1.  Nipple-height-finding doesn't quite work.
    a.  Ideal solution involves a Conv neural network trained on labeled locations of people's nipples
      1.  And then a vertical shift from the front view to the size view (ie. bottoms of feet should be at same height)
        a.  The vertical shift ought to be more subtly tuned than I was doing earlier.  Perhaps the center of the top and bottom should be in the same place.
    b.  Oh wait but also women can't do that.  Unless we want bust size ON TOP of the breasts.  Hm.  Maybe for clothes that actually IS what we want.
  2.  The assumption that chest circumference is exactly an ellipse overshoots the actual chest measurement.
    a.  Solve by adding a constant?
  3.
  4.
  5.
  6.
  7.
  8.
  9.
  10.
  11.
  12.
  13.
  14.
  15.
  16.
  17.
  18.



















======================================================================
Wed Feb 27 10:46:38 EST 2019

  Before going into pltshow, I get this bug (seg.py's segment_nparr(self, img), right before the return statement): 

  resized_image going into deeplab
  Clipping input data to the valid range for imshow with RGB data ([0..1] for floats or [0..255] for integers).
  saving segmentation map in  _segmented____binary_mask_.jpg
  WARNING:root:Lossy conversion from int64 to uint8. Range [0, 15]. Convert image to uint8 prior to saving to suppress this warning.

